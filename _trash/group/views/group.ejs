<!doctype html>
<html lang="en">
<head>
<% include common/head %>
</head>
<body class="bg-dark text-light">
  <% include common/menu %>
  <main class="container">

    <div class="row">
    <div class="col col-md-9">


          <div class="card bg-dark text-light shadow mb-4">
            <h5 class="card-header"><%= group.name %></h5>


            <div class="card-header">
              <ul class="nav nav-pills card-header-pills float-right">

                <li class="nav-item">
                  <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Edit</a>
                </li>

                <li class="nav-item">
                  <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Edit</a>
                </li>

              </ul>
            </div>

            <div class="card-body">
              <p class="lead"><%= group.description %></p>
            </div>
            <div class="card-body">
              <h5 class="card-title"><%= group.name %> Membership</h5>
              <% if(group.member){ %>
                <div class="alert alert-info" role="alert">
                  You are a member of <%= group.name %>.
                </div>
                <form action="/group/leave" method="POST">
                  <input name="id" type="hidden" value="<%= group.id %>">
                  <button type="submit" class="btn btn-danger mb-3">Leave <%= group.name %></button>
                </form>
              <% } else { %>
                <form action="/group/join" method="POST">
                  <input name="id" type="hidden" value="<%= group.id %>">
                  <button type="submit" class="btn btn-primary mb-3">Join <%= group.name %></button>
                </form>
              <% } %>

              <form action="/group/create" method="POST">
                <input name="id" type="hidden" value="<%= group.id %>">
                <button type="submit" class="btn btn-primary mb-3">Create New</button>
              </form>

            </div>
            <% if(!group.root){ %>
              <div class="card-body">
                <button class="btn btn-primary mb-3" onclick="history.back()" type="button">Back</button>
              </div>
            <% } %>
            <div class="card-footer text-muted">
              <%= group.name %> contains <%= group.links.length %> other group<%= group.links.length==1?'':'s' %>.
            </div>
          </div>


          <div class="row row-cols-1 row-cols-md-2 g-4">
          <% group.links.forEach(function(group){ %>
            <div class="col">
            <div class="card bg-dark text-light shadow mb-4">
              <h5 class="card-header text-info"><%= group.name %></h5>
              <div class="card-body">
                <p class="small"><%= group.description %></p>
              </div>
              <div class="card-body border-top border-secondary text-right">
                <a href="/group/<%= group.id %>" class="btn btn-secondary">Inspect <%= group.name %></a>
              </div>
            </div>
          </div>
          <% }); %>
          </div>

    </div>
    <div class="col col-md-3">

      <div class="card bg-dark text-light shadow mb-4">
        <h5 class="card-header">Your Memberships</h5>
        <div class="card-body">
          <p class="small"><%= group.description %></p>
        </div>
        <div class="card-body border-top border-secondary text-right">
          <a href="/group/<%= group.id %>" class="btn btn-secondary">Inspect <%= group.name %></a>
        </div>
      </div>

      <div class="card bg-dark text-light shadow mb-4">
        <h5 class="card-header">Most Visited & Recent</h5>
        <div class="card-body">
          <p class="small"><%= group.description %></p>
        </div>
        <div class="card-body border-top border-secondary text-right">
          <a href="/group/<%= group.id %>" class="btn btn-secondary">Inspect <%= group.name %></a>
        </div>
      </div>


    </div>
    </div>


<!--
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb bg-dark shadow">
        <li class="breadcrumb-item"><a href="/group" class="text-reset">Home</a></li>
        <% group.path.forEach(function(fragment){ %>
          <li class="breadcrumb-item"><a href="/group/<%= fragment.id %>" class="text-reset"><%= fragment.name %></a></li>
        <% }); %>
      </ol>
    </nav> -->



  </main><!-- /.container -->
  <% include common/foot %>
</body>
</html>
